<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Music</title>
    <style>
        #audio_btn {
            width: 30px;
            height: 30px;
            background-image: url(images/music.png);
            background-size: contain;
        }
        .rotate {
              -webkit-animation: rotating 1.2s linear infinite;
              -moz-animation: rotating 1.2s linear infinite;
              -o-animation: rotating 1.2s linear infinite;
              animation: rotating 1.2s linear infinite
        }

        @-webkit-keyframes rotating {
            from {
                -webkit-transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(360deg)
            }
        }

        @keyframes rotating {
            from {
                transform: rotate(0)
            }
            to {
                transform: rotate(360deg)
            }
        }

        @-moz-keyframes rotating {
            from {
                -moz-transform: rotate(0)
            }
            to {
                -moz-transform: rotate(360deg)
            }
        }
    </style>
</head>
<body>
<div id="audio_btn" class="rotate">
    <audio id="media"></audio>
</div>
<script>
    var flag=true;
    var oDiv=document.querySelector('#audio_btn');
    var oMedia=document.getElementById('media');
    autoP();

/*audio循环播放方式二: 添加媒体结束事件*/
    oMedia.addEventListener('ended',function(){
        console.log('End*************');
        autoP();
    },false);

/*audio循环播放方式一: 定时器*/
//    setInterval(function(){
//        if(flag==true){
//            autoP();
//        }
//    },100000)
    function autoP(){
        oMedia.src='music.mp3';
        oMedia.play();
        oDiv.onclick=function(){
            flag=!flag;
            if(flag==true){
                oDiv.className='rotate';
                oMedia.play();
            }else{
                oDiv.className='';
                oMedia.pause();
            }
        }
    }


</script>
</body>
</html>